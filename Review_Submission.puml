@startuml Review Submission Sequence
Actor Client
participant ReviewController
participant ReviewFacade
participant ReviewService
participant ReviewRepository
database Database

Client -> ReviewController : POST /places/{id}/reviews
activate ReviewController

ReviewController -> ReviewFacade : create_review(reviewData)
activate ReviewFacade

ReviewFacade -> ReviewService : create_review(reviewData)
activate ReviewService

ReviewService -> ReviewService : validate_rating()
ReviewService -> ReviewRepository : save_review(reviewData)
activate ReviewRepository

ReviewRepository -> Database : insert_review()
Database --> ReviewRepository : review_id
ReviewRepository --> ReviewService : review
deactivate ReviewRepository

ReviewService -> ReviewService : update_place_rating()
ReviewService --> ReviewFacade : review
deactivate ReviewService

ReviewFacade --> ReviewController : reviewDTO
deactivate ReviewFacade

ReviewController --> Client : 201 Created
deactivate ReviewController

@enduml
